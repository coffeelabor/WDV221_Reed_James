<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>WDV221 Intro Javascript</title>

<script type="text/javascript" async>

	//create team names array
	var teamNames = ["Bears","Browns","Reds"];	
	
	//create parallel array 
	var teamScores = [3,7,4];					
	
	function teamsTestLoop(){
		for(let i = 0; i<teamNames.length; i++){
			console.log("Team: ", teamNames[i])
			console.log("Score: ", teamScores[i])
			console.log("---------------------")
		}
		console.log("#####################")

	}
	
	function lookupNames(inNames)
	{
		for(var j=0; j<teamNames.length; j++)
		{
			if( inNames == teamNames[j])
			{
				return j;
			}
		}
		return inNames + " not found";	
	}//end lookupNames()
	
	function getScore() {
		var inScore = parseInt( document.getElementById("inputScore").value );
		//send score back to where it is called
		return inScore;								
	}
	
	function processTeamNames() {		
		document.getElementById("outputResponse").innerHTML = "";
		var inputScoreValue = document.getElementById("inputScore");
		var inputTeamValue = document.getElementById("inputName");
		var inTeamName = document.getElementById("inputName").value;
		var inTeamScore = getScore();	
		var lookupResponse = lookupNames(inTeamName);
		if((inTeamScore&&lookupResponse)|| !isNaN(lookupResponse)){

			if( isNaN(lookupResponse) )
			{
				//display not found message
				teamNames.push(inTeamName);
				teamScores.push(inTeamScore);	
				document.getElementById("outputResponse").innerHTML = `${lookupResponse}, But it was added to the list`;
				inputTeamValue.value = "";
				inputScoreValue.value = "";

			}
			else
			{
				console.log("Else!!!")
				if(inputScoreValue.value != ""){
					teamScores[lookupResponse] = teamScores[lookupResponse] + inTeamScore;
				}
				document.getElementById("outputResponse").innerHTML = inTeamName + " " + teamScores[lookupResponse];
				inputTeamValue.value = "";
				inputScoreValue.value = ""; 
			}
		}
		else{
				document.getElementById("outputResponse").innerHTML = "Please Enter a Team and Score";
		}
	}
	
	function mapNamesToScores(){
		var teamsScoresArr = teamNames.map(function(v, i){
			return [v, teamScores[i]];
		})
		return teamsScoresArr;
	}

	function displayTeamRank(){
		var displayArr = mapNamesToScores();
		var teamRankArea = document.getElementById("rankingArea");
		var teamScoreArea = document.getElementById("scoreArea");
		var teamOl = document.createElement("ol");
		teamRankArea.innerHTML = "";
		teamScoreArea.innerHTML = "";
		displayArr.sort(function(a,b){
			return b[1]-a[1];
		})
		for(let i=0; i < displayArr.length; i++){

			teamRankArea.innerHTML += `<li id=teamRank${i}> ${displayArr[i][0]} </li>`;
			teamScoreArea.innerHTML += `<li id=teamScoreRank${i}> ${displayArr[i][1]} </li>`;
			
			console.log(displayArr[i]);

		}
		document.getElementById("teamRank0").style.background = "yellow";
		document.getElementById("teamScoreRank0").style.background = "yellow";
		document.getElementById("outputRankResponse").innerHTML = `${displayArr[0][0]} ${displayArr[0][1]}`;
	}
	displayTeamRank();
	
	function resetBoard() {
		document.getElementById("outputResponse").innerHTML = "";
		document.getElementById("outputRankResponse").innerHTML = "";
		document.getElementById("rankingArea").innerHTML = "";
		document.getElementById("scoreArea").innerHTML = "";
		document.getElementById("form1").reset();
	}

</script>

</head>

<body>
	<nav>
		<h3><a href="../index.html">Home</a></h3>
	</nav>
	<h1>WDV221 Intro Javascript</h1>
	<h2>Skill Test - Lookup and Accumulate Arrays</h2>
	<div style="display: flex; justify-content: space-between; ">			
	<form style="width: 50%;" name="form1" method="post" action="">
		<fieldset>
			<legend>Team Scores</legend>
			<p>
			<label>Team Name: 
				<input type="text" name="inputName" id="inputName">
			</label>
			</p>

			<p>
				<label>Team Score: 
					<input type="text" name="inputScore" id="inputScore">
				</label>
			</p>
			<p>
				Current Status: <span id="outputResponse"></span> </p>
			<p>
			
				<input type="button" name="button" id="buttonProcess" value="Process Team Names" onclick="processTeamNames(); teamsTestLoop();">
				<input type="reset" name="button2" id="button2" value="Reset" onclick="resetBoard()">
			</p>
		</fieldset>   
	</form>
	<form style="width: 50%;" name="form1" method="post" action="">
		<fieldset>
			<legend>Team Ranks</legend>
			<div style="display: flex;  justify-content: space-around;">
				<div style="flex-direction: column; height: 200px;">
					<h3>Team Ranking</h3>
					<ol id="rankingArea">

					</ol>						
				</div>
				<div style="flex-direction: column;">
					<h3>Team Score</h3>
					<ul id="scoreArea">
					
					</ul>
				</div>
			</div>
			<p>
				Current 1 Seed: <span id="outputRankResponse"></span> </p>
				<input type="button" name="button" id="buttonDisplay" value="Display Team Rankings/Scores" onclick="displayTeamRank();teamsTestLoop();">
			
		</fieldset>   
	</form>
	
	</div>
	
	<h3>Instructions:</h3>
		<p>1. Modify the Reset to clear the current status.</p>
		<p>2. When you enter a team that is not in the teamNames array add it to the teamNames array and add the score to the teamScores array. </p>
		<p>3. Add a function that will display all teams and their current score on the page. Call this from processTeamNames().</p>
		<p>4. Add a button to display all teams and their current score on the page.
		<p><strong>Extra Credit:</strong>
			<ul>
			<li>Highlight the team with the highest score.</li>
			<li>Display the teams from high score to low score</li>
			</ul>
	</p>
	
</body>
</html>
